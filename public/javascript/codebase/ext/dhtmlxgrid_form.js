D.prototype.xD=D.prototype.attachHeader;D.prototype.attachHeader=function(){this.xD.apply(this,arguments);this.CC();if(typeof(this.sY)=="undefined")this.yX(true);if(typeof(this.DO)=="undefined")this.BP(true);var that=this;this.xc=[];this.vb=[];this.attachEvent("onRowAdded",function(id){that.xc.push(id);that.amz(id,function(a){a.cell.hy=true});return true});this.attachEvent("onBeforeRowDeleted",function(id){that.vb.push(id);return true});this.attachHeader=this.xD};D.prototype.CC=function(){this.qs=this.we();if(this.qs===false){return false};if(this.zI)return;this.vn=new Array();var self=this;dE(this.qs,'submit',function(){self.ym()});this.zI=true};D.prototype.ym=function(){this.vr()};D.prototype.yX=function(mode){this.sY=K(mode)};D.prototype.BP=function(mode){this.DO=K(mode)};D.prototype.JV=function(mode){this.wN=K(mode)};D.prototype.acZ=function(mode){this.yg=K(mode)};D.prototype.tx=function(name,value){var input=document.createElement('input');input.type='hidden';input.name=(this.aL.id||'dhtmlXGrid')+'_'+name;input.value=value;this.qs.appendChild(input);this.vn.push(input)};D.prototype.wy=function(r){for(var j=0;j<this.gA;j++){var Ft=this.cells3(r,j);if((!this.sY)||Ft.hy())this.tx(r.idd+'_'+j,Ft.getValue())}};D.prototype.vr=function(){if(this.qs==false){return false};for(var i=0;i<this.vn.length;i++){this.qs.removeChild(this.vn[i])};this.vn=new Array();if(this.wN){if(this.yg)this.tx("selected",this.bI());else for(var i=0;i<this.bY.length;i++)this.wy(this.bY[i])}else{if(this.DO){if(this.xc.length)this.tx("rowsadded",this.xc.join(","));if(this.vb.length)this.tx("rowsdeleted",this.vb.join(","))};this.fm(function(id){this.wy(this.bj[id])})}};D.prototype.we=function(){var qs=false;var parent=this.aL;while(parent!=document.body){if(parent.tagName.toLowerCase()=='form'){qs=parent;break}else{parent=parent.parentNode}};return qs};